<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Профиль</title>
</head>
<body>
  <h1>Профиль</h1>
  <div id="profile"></div>
  <button id="logout">Выйти</button>

  <script>
    const API = "https://handbook-backend-ah0j.onrender.com";
    const token = localStorage.getItem("token");
    if (!token) {
      window.location.href = "login.html";
    }

    async function loadProfile() {
      const res = await fetch(`${API}/api/profile`, {
        headers: { "Authorization": "Bearer " + token }
      });

      if (res.ok) {
        const user = await res.json();
        document.getElementById("profile").innerHTML =
          `<p>Имя: ${user.name}</p>
           <p>Email: ${user.email}</p>`;
      } else {
        alert("Не удалось загрузить профиль");
      }
    }

    document.getElementById("logout").addEventListener("click", () => {
      localStorage.removeItem("token");
      window.location.href = "index.html";
    });

    loadProfile();
  </script>
</body>
</html>
